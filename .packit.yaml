# Default packit instance is a prod and only this is used
# stg instance is present for testing new packit features in forked repositories where stg is installed.
packit_instances: ["prod", "stg"]
upstream_project_url: https://github.com/debezium/debezium
issue_repository: https://github.com/debezium/debezium
jobs:
  - job: tests
    trigger: pull_request
    # Suffix for job name
    identifier: "postgres-12-decoderbufs"
    targets:
      # This target is not used at all by our tests, but it has to be one of the available - https://packit.dev/docs/configuration/#aliases
      - centos-stream-8-x86_64
    skip_build: true
    manual_trigger: true
    labels:
      - postgres
    tf_extra_params:
      test:
        fmf:
          name: postgres
      environments:
        variables:
          POSTGRESQL_VERSION: 12
          PLUGIN_NAME: decoderbufs

  ###############################################################################################
  - job: tests
    trigger: pull_request
    # Suffix for job name
    identifier: "postgres-12-pgoutput"
    targets:
      # This target is not used at all by our tests, but it has to be one of the available - https://packit.dev/docs/configuration/#aliases
      - centos-stream-8-x86_64
    skip_build: true
    manual_trigger: true
    labels:
      - postgres
    tf_extra_params:
      test:
        fmf:
          name: postgres
      environments:
        variables:
          POSTGRESQL_VERSION: 12
          PLUGIN_NAME: pgoutput

  ###############################################################################################
  - job: tests
    trigger: pull_request
    # Suffix for job name
    identifier: "postgres-15-decoderbufs"
    targets:
      # This target is not used at all by our tests, but it has to be one of the available - https://packit.dev/docs/configuration/#aliases
      - centos-stream-8-x86_64
    skip_build: true
    manual_trigger: true
    labels:
      - postgres
    tf_extra_params:
      test:
        fmf:
          name: postgres
      environments:
        variables:
          POSTGRESQL_VERSION: 15
          PLUGIN_NAME: decoderbufs


  ###############################################################################################
  - job: tests
    trigger: pull_request
    # Suffix for job name
    identifier: "postgres-15-pgoutput"
    targets:
      # This target is not used at all by our tests, but it has to be one of the available - https://packit.dev/docs/configuration/#aliases
      - centos-stream-8-x86_64
    skip_build: true
    manual_trigger: true
    labels:
      - postgres
    tf_extra_params:
      test:
        fmf:
          name: postgres
      environments:
        variables:
          POSTGRESQL_VERSION: 15
          PLUGIN_NAME: pgoutput

  ###############################################################################################
  - job: tests
    trigger: pull_request
    # Suffix for job name
    identifier: "mysql-8-none"
    targets:
      # This target is not used at all by our tests, but it has to be one of the available - https://packit.dev/docs/configuration/#aliases
      - centos-stream-8-x86_64
    skip_build: true
    manual_trigger: true
    labels:
      - mysql
    tf_extra_params:
      test:
        fmf:
          name: mysql
      environments:
        variables:
          MYSQL_VERSION: 8.0.32
          PROFILE: none

  ###############################################################################################
  - job: tests
    trigger: pull_request
    # Suffix for job name
    identifier: "mysql-8-assembly"
    targets:
      # This target is not used at all by our tests, but it has to be one of the available - https://packit.dev/docs/configuration/#aliases
      - centos-stream-8-x86_64
    skip_build: true
    manual_trigger: true
    labels:
      - mysql
    tf_extra_params:
      test:
        fmf:
          name: mysql
      environments:
        variables:
          MYSQL_VERSION: 8.0.32
          PROFILE: assembly

  ###############################################################################################
  - job: tests
    trigger: pull_request
    # Suffix for job name
    identifier: "mysql-5-none"
    targets:
      # This target is not used at all by our tests, but it has to be one of the available - https://packit.dev/docs/configuration/#aliases
      - centos-stream-8-x86_64
    skip_build: true
    manual_trigger: true
    labels:
      - mysql
    tf_extra_params:
      test:
        fmf:
          name: mysql
      environments:
        variables:
          MYSQL_VERSION: 5.7
          PROFILE: none

  ###############################################################################################
  - job: tests
    trigger: pull_request
    # Suffix for job name
    identifier: "mysql-5-assembly"
    targets:
      # This target is not used at all by our tests, but it has to be one of the available - https://packit.dev/docs/configuration/#aliases
      - centos-stream-8-x86_64
    skip_build: true
    manual_trigger: true
    labels:
      - mysql
    tf_extra_params:
      test:
        fmf:
          name: mysql
      environments:
        variables:
          MYSQL_VERSION: 5.7
          PROFILE: assembly

  ###############################################################################################
  - job: tests
    trigger: pull_request
    # Suffix for job name
    identifier: "sqlserver-2017"
    targets:
      # This target is not used at all by our tests, but it has to be one of the available - https://packit.dev/docs/configuration/#aliases
      - centos-stream-8-x86_64
    skip_build: true
    manual_trigger: true
    labels:
      - sqlserver
    tf_extra_params:
      test:
        fmf:
          name: sqlserver
      environments:
        variables:
          SQL_SEVER_VERSION: 2017

  ###############################################################################################
  - job: tests
    trigger: pull_request
    # Suffix for job name
    identifier: "sqlserver-2022"
    targets:
      # This target is not used at all by our tests, but it has to be one of the available - https://packit.dev/docs/configuration/#aliases
      - centos-stream-8-x86_64
    skip_build: true
    manual_trigger: true
    labels:
      - sqlserver
    tf_extra_params:
      test:
        fmf:
          name: sqlserver
      environments:
        variables:
          SQL_SEVER_VERSION: 2022

  ###############################################################################################
  - job: tests
    trigger: pull_request
    # Suffix for job name
    identifier: "mongodb-4"
    targets:
      # This target is not used at all by our tests, but it has to be one of the available - https://packit.dev/docs/configuration/#aliases
      - centos-stream-8-x86_64
    skip_build: true
    manual_trigger: true
    labels:
      - mongodb
    tf_extra_params:
      test:
        fmf:
          name: mongodb
      environments:
        variables:
          MONGODB_VERSION: 4.4
          TEST_PROFILE: mongodb

  ###############################################################################################
  - job: tests
    trigger: pull_request
    # Suffix for job name
    identifier: "mongodb-5"
    targets:
      # This target is not used at all by our tests, but it has to be one of the available - https://packit.dev/docs/configuration/#aliases
      - centos-stream-8-x86_64
    skip_build: true
    manual_trigger: true
    labels:
      - mongodb
    tf_extra_params:
      test:
        fmf:
          name: mongodb
      environments:
        variables:
          MONGODB_VERSION: 5.0
          TEST_PROFILE: mongodb

  ###############################################################################################
  - job: tests
    trigger: pull_request
    # Suffix for job name
    identifier: "mongodb-6"
    targets:
      # This target is not used at all by our tests, but it has to be one of the available - https://packit.dev/docs/configuration/#aliases
      - centos-stream-8-x86_64
    skip_build: true
    manual_trigger: true
    labels:
      - mongodb
    tf_extra_params:
      test:
        fmf:
          name: mongodb
      environments:
        variables:
          MONGODB_VERSION: 6.0
          TEST_PROFILE: mongodb

  ###############################################################################################
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>Debezium connector for MySQL</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
<h1>Debezium connector for MySQL</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>HERE IS WHERE THE BINLOG AND INITIAL OVERVIEW CONTENT SHOULD GO</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#overview-of-how-the-mysql-connector-works">Overview of how the MySQL connector works</a></p>
</li>
<li>
<p><a href="#setup-the-mysql-server">Setting up MySQL server</a></p>
</li>
<li>
<p><a href="#deploy-the-mysql-connector">Deploying the MySQL connector</a></p>
</li>
<li>
<p><a href="#troubleshoot-the-mysql-connector">Troubleshooting the MySQL connector</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="overview-of-how-the-mysql-connector-works">Overview of how the MySQL connector works</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Debezium MySQL connector tracks the structure of the tables, performs snapshots, transforms binlog events into Debezium change events and records where those events are recorded in Kafka.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#how-the-mysql-connector-uses-database-schemas_cdc">How the connector uses database schemas</a></p>
</li>
<li>
<p><a href="#how-the-mysql-connector-performs-database-snapshots_cdc">How the connector performs database snapshots</a></p>
</li>
<li>
<p><a href="#how-the-mysql-connector-handles-schema-change-topics_cdc">How the connector handles schema change topics</a></p>
</li>
<li>
<p><a href="#mysql-connector-events_cdc">MySQL connector events</a></p>
</li>
<li>
<p><a href="#how-the-mysql-connector-maps-data-types_cdc">How the connector maps data types</a></p>
</li>
<li>
<p><a href="#the-mysql-connector-and-kafka-topics_cdc">The MySQL connector and Kafka topics</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="how-the-mysql-connector-uses-database-schemas_cdc">How the MySQL connector uses database schemas</h3>
<div class="paragraph">
<p>When a database client queries a database, it uses the database&#8217;s current schema. As database schemas often change, the Debezium <strong>MySQL connector</strong> knows how the schema appeared for each <code>INSERT</code>, <code>UPDATE</code>, and <code>DELETE</code> operation.</p>
</div>
<div class="paragraph">
<p>MySQL includes both <em>row-level changes</em> and <em>DDL statements</em> in its binlog which the connector reads to parse and update the in-memory representation of each table&#8217;s schema. This is used to understand the table structure at the time of each operation, which produces accurate change events.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The connector records all DDL statements along with their position in the binlog in a separate database history so that when the connector restarts (<em>after a possible crash or graceful shutdown</em>), it continues reading the binlog from that specific point in time.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
See <a href="#the-mysql-connector-and-kafka-topics_cdc">The MySQL connector and Kafka topics</a> for more on topic naming conventions.
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>If you do not use the <em>database history topic</em> described here, check out the <a href="#how-the-mysql-connector-handles-schema-change-topics_cdc">schema change topics</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="how-the-mysql-connector-performs-database-snapshots_cdc">How the MySQL connector performs database snapshots</h3>
<div class="paragraph">
<p>When your Debezium MySQL connector is first started, it performs an initial <em>consistent snapshot</em> of your database. The following flow describes how this snapshot is completed.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This is the default snapshot mode which is set as <code>inital</code> in the <code>snapshot.mode</code> property. For other snapshots modes, please check out the <a href="#mysql-connector-configuration-properties_cdc">MySQL connector configuration properties</a>.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">The connector&#8230;&#8203;</dt>
</dl>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 90%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Step</th>
<th class="tableblock halign-left valign-top">Action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Grabs a <strong>global read lock</strong> that blocks <em>writes</em> by other database clients.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The snapshot itself does not prevent other clients from applying DDL which might interfere with the connector&#8217;s attempt to read the binlog position and table schemas. The global read lock is kept while teh binlog position is read before released in a later step.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Starts a transaction with <a href="https://dev.mysql.com/doc/refman/5.6/en/innodb-consistent-read.html">repeatable read semantics</a> to ensure that all subsequent reads within the transaction are done against the <em>consistent snapshot</em>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Reads the current binlog position.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>4</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Reads the schema of the databases and tables allowed by the connector&#8217;s configuration.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>5</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Releases the <strong>global read lock</strong>. This now allows other database clients to write to the database.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>6</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Writes the DDL changes to the schema change topic, including all necessary <code>DROP&#8230;&#8203;</code> and <code>CREATE&#8230;&#8203;</code> DDL statements.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This happens if applicable.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>7</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Scans the database tables and generates <code>CREATE</code> events on the relevant table-specific Kakfa topics for each row.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>8</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Commits the transaction.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>9</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Records the completed snapshot in the connector offsets.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_what_happens_if_the_connector_fails">What happens if the connector fails?</h4>
<div class="paragraph">
<p>If the connector fails, stops, or is rebalanced while making the <em>initial snapshot</em>, the connector creates a new snapshot once restarted. Once that <em>intial snapshot</em> is completed, the Debezium MySQL connector restarts from the same position in the binlog so it does not miss any updates.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If the connector stops for long enough, MySQL could purge old binlog files and the connector&#8217;s position would be lost. If the position is lost, the connecotr reverts to the <em>initial snapshot</em> for its starting position. For more tips on troubleshooting the Debezium MySQL connector, see <a href="#troubleshoot-the-mysql-connector">Troubleshooting the MySQL connector</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_what_if_global_read_locks_are_not_allowed">What if Global Read Locks are not allowed?</h4>
<div class="paragraph">
<p>Some environments do not allow a <strong>global read lock</strong>. If the Debezium MySQL connector detects that global read locks are not permitted, the connector uses table-level locks instead and performs a snapshot with this method.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
The user must have <code>LOCK_TABLES</code> privileges.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">The connector&#8230;&#8203;</dt>
</dl>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 90%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Step</th>
<th class="tableblock halign-left valign-top">Action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Starts a transaction with <a href="https://dev.mysql.com/doc/refman/5.6/en/innodb-consistent-read.html">repeatable read semantics</a> to ensure that all subsequent reads within the transaction are done against the <em>consistent snapshot</em>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reads and filters the names of the databases and tables.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Reads the current binlog position.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>4</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Reads the schema of the databases and tables allowed by the connector&#8217;s configuration.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>5</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Writes the DDL changes to the schema change topic, including all necessary <code>DROP&#8230;&#8203;</code> and <code>CREATE&#8230;&#8203;</code> DDL statements.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This happens if applicable.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>6</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Scans the database tables and generates <code>CREATE</code> events on the relevant table-specific Kakfa topics for each row.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>7</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Commits the transaction.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>8</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Releases the table-level locks.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>9</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Records the completed snapshot in the connector offsets.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p> <br></p>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="#troubleshoot-the-mysql-connector">Troubleshooting the MySQL connector</a></p>
</li>
<li>
<p><a href="#mysql-connector-configuration-properties_cdc">MySQL configuration properties</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="how-the-mysql-connector-handles-schema-change-topics_cdc">How the MySQL connector handles schema change topics</h3>
<div class="paragraph">
<p>You can configure the  Debezium <strong>MySQL connector</strong> to produce schema change events that include all DDL statements applied to databases in the MySQL server. The connector writes all of these events to a Kakfa topic named <code>&lt;serverName&gt;</code> where <code>serverName</code> is the name of the connector as specified in the <code>database.server.name</code> configuration property.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
If you choose to use <em>schema change events</em>, use the schema change topic and <strong>do not</strong> consume the database history topic.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Make sure that the <code>num.partitions</code> configuration for Kakfa is set to <code>1</code> to ensure schema changes are kept in the correct order.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_schema_change_topic_structure">Schema change topic structure</h4>
<div class="paragraph">
<p>Each message that is written to the schema change topic contains a message key which includes the name of the connected database used when applying DDL statements:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "schema": {
    "type": "struct",
    "name": "io.Debezium.connector.mysql.SchemaChangeKey",
    "optional": false,
    "fields": [
      {
        "field": "databaseName",
        "type": "string",
        "optional": false
      }
    ]
  },
  "payload": {
    "databaseName": "inventory"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The schema change event message value contains a structure that includes the DDL statements, the database to which the statements were applied, and the position in the binlog where the statements appeared:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "schema": {
    "type": "struct",
    "name": "io.Debezium.connector.mysql.SchemaChangeValue",
    "optional": false,
    "fields": [
      {
        "field": "databaseName",
        "type": "string",
        "optional": false
      },
      {
        "field": "ddl",
        "type": "string",
        "optional": false
      },
      {
        "field": "source",
        "type": "struct",
        "name": "io.Debezium.connector.mysql.Source",
        "optional": false,
        "fields": [
          {
            "type": "string",
            "optional": true,
            "field": "version"
          },
          {
            "type": "string",
            "optional": false,
            "field": "name"
          },
          {
            "type": "int64",
            "optional": false,
            "field": "server_id"
          },
          {
            "type": "int64",
            "optional": false,
            "field": "ts_sec"
          },
          {
            "type": "string",
            "optional": true,
            "field": "gtid"
          },
          {
            "type": "string",
            "optional": false,
            "field": "file"
          },
          {
            "type": "int64",
            "optional": false,
            "field": "pos"
          },
          {
            "type": "int32",
            "optional": false,
            "field": "row"
          },
          {
            "type": "boolean",
            "optional": true,
            "default": false,
            "field": "snapshot"
          },
          {
            "type": "int64",
            "optional": true,
            "field": "thread"
          },
          {
            "type": "string",
            "optional": true,
            "field": "db"
          },
          {
            "type": "string",
            "optional": true,
            "field": "table"
          },
          {
            "type": "string",
            "optional": true,
            "field": "query"
          }
        ]
      }
    ]
  },
  "payload": {
    "databaseName": "inventory",
    "ddl": "CREATE TABLE products ( id INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY, name VARCHAR(255) NOT NULL, description VARCHAR(512), weight FLOAT ); ALTER TABLE products AUTO_INCREMENT = 101;",
    "source" : {
      "version": "0.10.0.Beta4",
      "name": "mysql-server-1",
      "server_id": 0,
      "ts_sec": 0,
      "gtid": null,
      "file": "mysql-bin.000003",
      "pos": 154,
      "row": 0,
      "snapshot": true,
      "thread": null,
      "db": null,
      "table": null,
      "query": null
    }
  }
}</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_important_tips_regarding_schema_change_topics">Important tips regarding schema change topics</h5>
<div class="paragraph">
<p>The <code>ddl</code> field may contain multiple DDL statements. Every statement applies to the database in the <code>databaseName</code> field and appears in the same order as they were applied in the database. The <code>source</code> field is structured exactly as a standard data change event written to table-specific topics. This field is useful to correlate events on different topic.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">....
    "payload": {
        "databaseName": "inventory",
        "ddl": "CREATE TABLE products ( id INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY,...
        "source" : {
            ....
        }
    }
....</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">What if a client submits DDL statements to <em>multiple databases</em>?</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>If MySQL applies them atomically, the connector takes the DDL statements in order, groups them by database, and creates a schema change event for each group.</p>
</li>
<li>
<p>If MySQL applies them individually, the connector creates a separate schema change event for each statement.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>If you do not use the <em>schema change topics</em> detailed here, check out the <a href="#how-the-mysql-connector-uses-database-schemas_cdc">database history topic</a>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="mysql-connector-events_cdc">MySQL connector events</h3>
<div class="paragraph">
<p>All data change events produced by the Debezium MySQL connector contain a key and a value. The change event key and the change event value each contain a <em>schema</em> and a <em>payload</em> where the schema describes the structure of the payload and the payload contains the data.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
The MySQL connector ensures that all Kakfa Connect schema names adhere to the <a href="http://avro.apache.org/docs/current/spec.html#names">Avro schema name format</a>. This is important as any character that is not a latin letter or underscore is replaced by an underscore which can lead to unexpected conflicts in schema names when the logical server names, database names, and table names container other characters that are replaced with these underscores.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_change_event_key">Change event key</h4>
<div class="paragraph">
<p>For any given table, the change event&#8217;s key has a structure that contains a field for each column in the <code>PRIMARY KEY</code> (or unique constraint) at the time the event was created. Let us look at an example table and then how the schema and payload would look for the table.</p>
</div>
<div class="listingblock">
<div class="title">example table</div>
<div class="content">
<pre class="highlight"><code class="language-sql" data-lang="sql">CREATE TABLE customers (
  id INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY,
  first_name VARCHAR(255) NOT NULL,
  last_name VARCHAR(255) NOT NULL,
  email VARCHAR(255) NOT NULL UNIQUE KEY
) AUTO_INCREMENT=1001;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">example change event key</div>
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "schema": {
    "type": "struct",
    "name": "mysql-server-1.inventory.customers.Key",
    "optional": false,
    "fields": [
      {
        "field": "id",
        "type": "int32",
        "optional": false
      }
    ]
  },
  "payload": {
    "id": 1001
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_change_event_value">Change event value</h4>
<div class="paragraph">
<p>text</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="how-the-mysql-connector-maps-data-types_cdc">How the MySQL connector maps data types</h3>
<div class="paragraph">
<p>A short introductory paragraph is required for the concept module.
It will provide an overview of the module.</p>
</div>
<div class="paragraph">
<p>The contents of a concept module give the user descriptions and explanations needed to understand and use a product.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Look at nouns and noun phrases in related procedure modules and assemblies to find the concepts to explain to users.</p>
</li>
<li>
<p>Explain only things that are visible to users. Even if a concept is interesting, it probably does not require explanation if it is not visible to users.</p>
</li>
<li>
<p>Do not include any instructions to perform an action, such as executing a command. Action items belong in procedure modules.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>A bulleted list of links to other material closely related to the contents of the concept module.</p>
</li>
<li>
<p>For more details on writing concept modules, see the <a href="https://github.com/redhat-documentation/modular-docs#modular-documentation-reference-guide">Modular Documentation Reference Guide</a>.</p>
</li>
<li>
<p>Use a consistent system for file names, IDs, and titles. For tips, see <em>Anchor Names and File Names</em> in <a href="https://github.com/redhat-documentation/modular-docs#modular-documentation-reference-guide">Modular Documentation Reference Guide</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="the-mysql-connector-and-kafka-topics_cdc">The MySQL connector and Kakfa topics</h3>
<div class="paragraph">
<p>The Debezium MySQL connector writes events for all <code>INSERT</code>, <code>UPDATE</code>, and <code>DELETE</code> operations from a single table to a single Kakfa topic. The Kakfa topic naming convention is as follows:</p>
</div>
<div class="listingblock">
<div class="title">format</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">serverName.databaseName.tableName</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 1. example</div>
<div class="content">
<div class="paragraph">
<p>Let us say that <code>fulfillment</code> is the server name and <code>inventory</code> is the database which contains <strong>three</strong> tables of <code>orders</code>, <code>customers</code>, and <code>products</code>. The Debezium MySQL connector produces events on three Kakfa topics, one for each table in the database:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">fulfillment.inventory.orders

fulfillment.inventory.customers

fulfillment.inventory.products</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="setup-the-mysql-server">Setting up MySQL server</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="#enable-the-mysql-binlog-for-cdc_cdc">Enable the MySQL binlog</a></p>
</li>
<li>
<p><a href="#create-a-mysql-user-for-cdc_cdc">Create MySQL user</a></p>
</li>
<li>
<p><a href="#enable-mysql-gtids-for-cdc_cdc">Enable MySQL GTIDs</a></p>
</li>
<li>
<p><a href="#setup-session-timeouts-for-cdc_cdc">Set up session timeouts</a></p>
</li>
<li>
<p><a href="#enable-query-log-events-for-cdc_cdc">Enable query log events</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="enable-the-mysql-binlog-for-cdc_cdc">Enabling the MySQL binlog for Debezium</h3>
<div class="paragraph">
<p>This paragraph is the procedure module introduction: a short description of the procedure.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>A bulleted list of conditions that must be satisfied before the user starts following this assembly.</p>
</li>
<li>
<p>You can also link to other modules or assemblies the user must follow before starting this assembly.</p>
</li>
<li>
<p>Delete the section title and bullets if the assembly has no prerequisites.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Start each step with an active verb.</p>
</li>
<li>
<p>Include one command or action per step.</p>
</li>
<li>
<p>Use an unnumbered bullet (*) if the procedure includes only one step.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>A bulleted list of links to other material closely related to the contents of the procedure module.</p>
</li>
<li>
<p>For more details on writing procedure modules, see the <a href="https://github.com/redhat-documentation/modular-docs#modular-documentation-reference-guide">Modular Documentation Reference Guide</a>.</p>
</li>
<li>
<p>Use a consistent system for file names, IDs, and titles. For tips, see <em>Anchor Names and File Names</em> in <a href="https://github.com/redhat-documentation/modular-docs#modular-documentation-reference-guide">Modular Documentation Reference Guide</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="create-a-mysql-user-for-cdc_cdc">Creating a MySQL user for Debezium</h3>
<div class="paragraph">
<p>This paragraph is the procedure module introduction: a short description of the procedure.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>A bulleted list of conditions that must be satisfied before the user starts following this assembly.</p>
</li>
<li>
<p>You can also link to other modules or assemblies the user must follow before starting this assembly.</p>
</li>
<li>
<p>Delete the section title and bullets if the assembly has no prerequisites.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Start each step with an active verb.</p>
</li>
<li>
<p>Include one command or action per step.</p>
</li>
<li>
<p>Use an unnumbered bullet (*) if the procedure includes only one step.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>A bulleted list of links to other material closely related to the contents of the procedure module.</p>
</li>
<li>
<p>For more details on writing procedure modules, see the <a href="https://github.com/redhat-documentation/modular-docs#modular-documentation-reference-guide">Modular Documentation Reference Guide</a>.</p>
</li>
<li>
<p>Use a consistent system for file names, IDs, and titles. For tips, see <em>Anchor Names and File Names</em> in <a href="https://github.com/redhat-documentation/modular-docs#modular-documentation-reference-guide">Modular Documentation Reference Guide</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="enable-mysql-gtids-for-cdc_cdc">Enabling MySQL Global Transaction Identifiers for Debezium</h3>
<div class="paragraph">
<p>This paragraph is the procedure module introduction: a short description of the procedure.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>A bulleted list of conditions that must be satisfied before the user starts following this assembly.</p>
</li>
<li>
<p>You can also link to other modules or assemblies the user must follow before starting this assembly.</p>
</li>
<li>
<p>Delete the section title and bullets if the assembly has no prerequisites.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Start each step with an active verb.</p>
</li>
<li>
<p>Include one command or action per step.</p>
</li>
<li>
<p>Use an unnumbered bullet (*) if the procedure includes only one step.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>A bulleted list of links to other material closely related to the contents of the procedure module.</p>
</li>
<li>
<p>For more details on writing procedure modules, see the <a href="https://github.com/redhat-documentation/modular-docs#modular-documentation-reference-guide">Modular Documentation Reference Guide</a>.</p>
</li>
<li>
<p>Use a consistent system for file names, IDs, and titles. For tips, see <em>Anchor Names and File Names</em> in <a href="https://github.com/redhat-documentation/modular-docs#modular-documentation-reference-guide">Modular Documentation Reference Guide</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="setup-session-timeouts-for-cdc_cdc">Setting up session timeouts for Debezium</h3>
<div class="paragraph">
<p>This paragraph is the procedure module introduction: a short description of the procedure.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>A bulleted list of conditions that must be satisfied before the user starts following this assembly.</p>
</li>
<li>
<p>You can also link to other modules or assemblies the user must follow before starting this assembly.</p>
</li>
<li>
<p>Delete the section title and bullets if the assembly has no prerequisites.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Start each step with an active verb.</p>
</li>
<li>
<p>Include one command or action per step.</p>
</li>
<li>
<p>Use an unnumbered bullet (*) if the procedure includes only one step.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>A bulleted list of links to other material closely related to the contents of the procedure module.</p>
</li>
<li>
<p>For more details on writing procedure modules, see the <a href="https://github.com/redhat-documentation/modular-docs#modular-documentation-reference-guide">Modular Documentation Reference Guide</a>.</p>
</li>
<li>
<p>Use a consistent system for file names, IDs, and titles. For tips, see <em>Anchor Names and File Names</em> in <a href="https://github.com/redhat-documentation/modular-docs#modular-documentation-reference-guide">Modular Documentation Reference Guide</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="enable-query-log-events-for-cdc_cdc">Enabling query log events for Debezium</h3>
<div class="paragraph">
<p>This paragraph is the procedure module introduction: a short description of the procedure.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>A bulleted list of conditions that must be satisfied before the user starts following this assembly.</p>
</li>
<li>
<p>You can also link to other modules or assemblies the user must follow before starting this assembly.</p>
</li>
<li>
<p>Delete the section title and bullets if the assembly has no prerequisites.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Start each step with an active verb.</p>
</li>
<li>
<p>Include one command or action per step.</p>
</li>
<li>
<p>Use an unnumbered bullet (*) if the procedure includes only one step.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>A bulleted list of links to other material closely related to the contents of the procedure module.</p>
</li>
<li>
<p>For more details on writing procedure modules, see the <a href="https://github.com/redhat-documentation/modular-docs#modular-documentation-reference-guide">Modular Documentation Reference Guide</a>.</p>
</li>
<li>
<p>Use a consistent system for file names, IDs, and titles. For tips, see <em>Anchor Names and File Names</em> in <a href="https://github.com/redhat-documentation/modular-docs#modular-documentation-reference-guide">Modular Documentation Reference Guide</a>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deploy-the-mysql-connector">Deploying the MySQL connector</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="#mysql-connector-configuration-properties_cdc">MySQL connector configuration properties</a></p>
</li>
<li>
<p><a href="#how-the-mysql-connector-performs-database-snapshots_cdc">How the connector performs database snapshots</a></p>
</li>
<li>
<p><a href="#how-the-mysql-connector-handles-schema-change-topics_cdc">How the connector handles schema change topics</a></p>
</li>
<li>
<p><a href="#understanding-mysql-connector-events_cdc">Understanding MySQL connector events</a></p>
</li>
<li>
<p><a href="#how-the-mysql-connector-maps-data-types_cdc">How the connector maps data types</a></p>
</li>
<li>
<p><a href="#the-mysql-connector-and-kafka-topics_cdc">The MySQL connector and Kafka topics</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="mysql-connector-configuration-properties_cdc">MySQL connector configuration properties</h3>
<div class="paragraph">
<p>A short introductory paragraph is required for the reference module.
It will provide an overview of the module.</p>
</div>
<div class="paragraph">
<p>A reference module provide data that users might want to look up, but do not need to remember.
It has a very strict structure, often in the form of a list or a table.
A well-organized reference module enables users to scan it quickly to find the details they want.
AsciiDoc markup to consider for reference data:</p>
</div>
<div class="ulist">
<div class="title">Unordered list</div>
<ul>
<li>
<p>For more details on writing reference modules, see the <a href="https://github.com/redhat-documentation/modular-docs#modular-documentation-reference-guide">Modular Documentation Reference Guide</a>.</p>
</li>
<li>
<p>Use a consistent system for file names, IDs, and titles.
For tips, see <em>Anchor Names and File Names</em> in <a href="https://github.com/redhat-documentation/modular-docs#modular-documentation-reference-guide">Modular Documentation Reference Guide</a>.</p>
</li>
</ul>
</div>
<div class="dlist">
<div class="title">Labeled list</div>
<dl>
<dt class="hdlist1">Term 1</dt>
<dd>
<p>Definition</p>
</dd>
<dt class="hdlist1">Term 2</dt>
<dd>
<p>Definition</p>
</dd>
</dl>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Table</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column 1</th>
<th class="tableblock halign-left valign-top">Column 2</th>
<th class="tableblock halign-left valign-top">Column 3</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Row 1, column 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Row 1, column 2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Row 1, column 3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Row 2, column 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Row 2, column 2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Row 2, column 3</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="how-the-mysql-connector-performs-database-snapshots_cdc">How the MySQL connector performs database snapshots</h3>
<div class="paragraph">
<p>When your Debezium MySQL connector is first started, it performs an initial <em>consistent snapshot</em> of your database. The following flow describes how this snapshot is completed.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This is the default snapshot mode which is set as <code>inital</code> in the <code>snapshot.mode</code> property. For other snapshots modes, please check out the <a href="#mysql-connector-configuration-properties_cdc">MySQL connector configuration properties</a>.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">The connector&#8230;&#8203;</dt>
</dl>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 90%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Step</th>
<th class="tableblock halign-left valign-top">Action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Grabs a <strong>global read lock</strong> that blocks <em>writes</em> by other database clients.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The snapshot itself does not prevent other clients from applying DDL which might interfere with the connector&#8217;s attempt to read the binlog position and table schemas. The global read lock is kept while teh binlog position is read before released in a later step.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>11</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Starts a transaction with <a href="https://dev.mysql.com/doc/refman/5.6/en/innodb-consistent-read.html">repeatable read semantics</a> to ensure that all subsequent reads within the transaction are done against the <em>consistent snapshot</em>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>12</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Reads the current binlog position.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>13</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Reads the schema of the databases and tables allowed by the connector&#8217;s configuration.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>14</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Releases the <strong>global read lock</strong>. This now allows other database clients to write to the database.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>15</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Writes the DDL changes to the schema change topic, including all necessary <code>DROP&#8230;&#8203;</code> and <code>CREATE&#8230;&#8203;</code> DDL statements.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This happens if applicable.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>16</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Scans the database tables and generates <code>CREATE</code> events on the relevant table-specific Kakfa topics for each row.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>17</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Commits the transaction.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>18</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Records the completed snapshot in the connector offsets.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_what_happens_if_the_connector_fails_2">What happens if the connector fails?</h4>
<div class="paragraph">
<p>If the connector fails, stops, or is rebalanced while making the <em>initial snapshot</em>, the connector creates a new snapshot once restarted. Once that <em>intial snapshot</em> is completed, the Debezium MySQL connector restarts from the same position in the binlog so it does not miss any updates.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If the connector stops for long enough, MySQL could purge old binlog files and the connector&#8217;s position would be lost. If the position is lost, the connecotr reverts to the <em>initial snapshot</em> for its starting position. For more tips on troubleshooting the Debezium MySQL connector, see <a href="#troubleshoot-the-mysql-connector">Troubleshooting the MySQL connector</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_what_if_global_read_locks_are_not_allowed_2">What if Global Read Locks are not allowed?</h4>
<div class="paragraph">
<p>Some environments do not allow a <strong>global read lock</strong>. If the Debezium MySQL connector detects that global read locks are not permitted, the connector uses table-level locks instead and performs a snapshot with this method.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
The user must have <code>LOCK_TABLES</code> privileges.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">The connector&#8230;&#8203;</dt>
</dl>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 90%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Step</th>
<th class="tableblock halign-left valign-top">Action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Starts a transaction with <a href="https://dev.mysql.com/doc/refman/5.6/en/innodb-consistent-read.html">repeatable read semantics</a> to ensure that all subsequent reads within the transaction are done against the <em>consistent snapshot</em>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>11</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reads and filters the names of the databases and tables.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>12</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Reads the current binlog position.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>13</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Reads the schema of the databases and tables allowed by the connector&#8217;s configuration.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>14</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Writes the DDL changes to the schema change topic, including all necessary <code>DROP&#8230;&#8203;</code> and <code>CREATE&#8230;&#8203;</code> DDL statements.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This happens if applicable.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>15</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Scans the database tables and generates <code>CREATE</code> events on the relevant table-specific Kakfa topics for each row.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>16</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Commits the transaction.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>17</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Releases the table-level locks.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>18</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Records the completed snapshot in the connector offsets.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p> <br></p>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="#troubleshoot-the-mysql-connector">Troubleshooting the MySQL connector</a></p>
</li>
<li>
<p><a href="#mysql-connector-configuration-properties_cdc">MySQL configuration properties</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="how-the-mysql-connector-handles-schema-change-topics_cdc">How the MySQL connector handles schema change topics</h3>
<div class="paragraph">
<p>You can configure the  Debezium <strong>MySQL connector</strong> to produce schema change events that include all DDL statements applied to databases in the MySQL server. The connector writes all of these events to a Kakfa topic named <code>&lt;serverName&gt;</code> where <code>serverName</code> is the name of the connector as specified in the <code>database.server.name</code> configuration property.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
If you choose to use <em>schema change events</em>, use the schema change topic and <strong>do not</strong> consume the database history topic.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Make sure that the <code>num.partitions</code> configuration for Kakfa is set to <code>1</code> to ensure schema changes are kept in the correct order.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_schema_change_topic_structure_2">Schema change topic structure</h4>
<div class="paragraph">
<p>Each message that is written to the schema change topic contains a message key which includes the name of the connected database used when applying DDL statements:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "schema": {
    "type": "struct",
    "name": "io.Debezium.connector.mysql.SchemaChangeKey",
    "optional": false,
    "fields": [
      {
        "field": "databaseName",
        "type": "string",
        "optional": false
      }
    ]
  },
  "payload": {
    "databaseName": "inventory"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The schema change event message value contains a structure that includes the DDL statements, the database to which the statements were applied, and the position in the binlog where the statements appeared:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "schema": {
    "type": "struct",
    "name": "io.Debezium.connector.mysql.SchemaChangeValue",
    "optional": false,
    "fields": [
      {
        "field": "databaseName",
        "type": "string",
        "optional": false
      },
      {
        "field": "ddl",
        "type": "string",
        "optional": false
      },
      {
        "field": "source",
        "type": "struct",
        "name": "io.Debezium.connector.mysql.Source",
        "optional": false,
        "fields": [
          {
            "type": "string",
            "optional": true,
            "field": "version"
          },
          {
            "type": "string",
            "optional": false,
            "field": "name"
          },
          {
            "type": "int64",
            "optional": false,
            "field": "server_id"
          },
          {
            "type": "int64",
            "optional": false,
            "field": "ts_sec"
          },
          {
            "type": "string",
            "optional": true,
            "field": "gtid"
          },
          {
            "type": "string",
            "optional": false,
            "field": "file"
          },
          {
            "type": "int64",
            "optional": false,
            "field": "pos"
          },
          {
            "type": "int32",
            "optional": false,
            "field": "row"
          },
          {
            "type": "boolean",
            "optional": true,
            "default": false,
            "field": "snapshot"
          },
          {
            "type": "int64",
            "optional": true,
            "field": "thread"
          },
          {
            "type": "string",
            "optional": true,
            "field": "db"
          },
          {
            "type": "string",
            "optional": true,
            "field": "table"
          },
          {
            "type": "string",
            "optional": true,
            "field": "query"
          }
        ]
      }
    ]
  },
  "payload": {
    "databaseName": "inventory",
    "ddl": "CREATE TABLE products ( id INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY, name VARCHAR(255) NOT NULL, description VARCHAR(512), weight FLOAT ); ALTER TABLE products AUTO_INCREMENT = 101;",
    "source" : {
      "version": "0.10.0.Beta4",
      "name": "mysql-server-1",
      "server_id": 0,
      "ts_sec": 0,
      "gtid": null,
      "file": "mysql-bin.000003",
      "pos": 154,
      "row": 0,
      "snapshot": true,
      "thread": null,
      "db": null,
      "table": null,
      "query": null
    }
  }
}</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_important_tips_regarding_schema_change_topics_2">Important tips regarding schema change topics</h5>
<div class="paragraph">
<p>The <code>ddl</code> field may contain multiple DDL statements. Every statement applies to the database in the <code>databaseName</code> field and appears in the same order as they were applied in the database. The <code>source</code> field is structured exactly as a standard data change event written to table-specific topics. This field is useful to correlate events on different topic.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">....
    "payload": {
        "databaseName": "inventory",
        "ddl": "CREATE TABLE products ( id INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY,...
        "source" : {
            ....
        }
    }
....</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">What if a client submits DDL statements to <em>multiple databases</em>?</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>If MySQL applies them atomically, the connector takes the DDL statements in order, groups them by database, and creates a schema change event for each group.</p>
</li>
<li>
<p>If MySQL applies them individually, the connector creates a separate schema change event for each statement.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>If you do not use the <em>schema change topics</em> detailed here, check out the <a href="#how-the-mysql-connector-uses-database-schemas_cdc">database history topic</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Unresolved directive in ../assemblies/cdc-mysql-connector/as_deploy-the-mysql-connector.adoc - include::../../modules/cdc-mysql-connector/c_understanding-mysql-connector-events.adoc[leveloffset=+1]</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="how-the-mysql-connector-maps-data-types_cdc">How the MySQL connector maps data types</h3>
<div class="paragraph">
<p>A short introductory paragraph is required for the concept module.
It will provide an overview of the module.</p>
</div>
<div class="paragraph">
<p>The contents of a concept module give the user descriptions and explanations needed to understand and use a product.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Look at nouns and noun phrases in related procedure modules and assemblies to find the concepts to explain to users.</p>
</li>
<li>
<p>Explain only things that are visible to users. Even if a concept is interesting, it probably does not require explanation if it is not visible to users.</p>
</li>
<li>
<p>Do not include any instructions to perform an action, such as executing a command. Action items belong in procedure modules.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>A bulleted list of links to other material closely related to the contents of the concept module.</p>
</li>
<li>
<p>For more details on writing concept modules, see the <a href="https://github.com/redhat-documentation/modular-docs#modular-documentation-reference-guide">Modular Documentation Reference Guide</a>.</p>
</li>
<li>
<p>Use a consistent system for file names, IDs, and titles. For tips, see <em>Anchor Names and File Names</em> in <a href="https://github.com/redhat-documentation/modular-docs#modular-documentation-reference-guide">Modular Documentation Reference Guide</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="the-mysql-connector-and-kafka-topics_cdc">The MySQL connector and Kakfa topics</h3>
<div class="paragraph">
<p>The Debezium MySQL connector writes events for all <code>INSERT</code>, <code>UPDATE</code>, and <code>DELETE</code> operations from a single table to a single Kakfa topic. The Kakfa topic naming convention is as follows:</p>
</div>
<div class="listingblock">
<div class="title">format</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">serverName.databaseName.tableName</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 2. example</div>
<div class="content">
<div class="paragraph">
<p>Let us say that <code>fulfillment</code> is the server name and <code>inventory</code> is the database which contains <strong>three</strong> tables of <code>orders</code>, <code>customers</code>, and <code>products</code>. The Debezium MySQL connector produces events on three Kakfa topics, one for each table in the database:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">fulfillment.inventory.orders

fulfillment.inventory.customers

fulfillment.inventory.products</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="troubleshoot-the-mysql-connector">Troubleshooting the MySQL connector</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="#how-the-mysql-connector-uses-database-schemas_cdc">How the connector uses database schemas</a></p>
</li>
<li>
<p><a href="#how-the-mysql-connector-performs-database-snapshots_cdc">How the connector performs database snapshots</a></p>
</li>
<li>
<p><a href="#how-the-mysql-connector-handles-schema-change-topics_cdc">How the connector handles schema change topics</a></p>
</li>
<li>
<p><a href="#understanding-mysql-connector-events_cdc">Understanding MySQL connector events</a></p>
</li>
<li>
<p><a href="#how-the-mysql-connector-maps-data-types_cdc">How the connector maps data types</a></p>
</li>
<li>
<p><a href="#the-mysql-connector-and-kafka-topics_cdc">The MySQL connector and Kafka topics</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="how-the-mysql-connector-uses-database-schemas_cdc">How the MySQL connector uses database schemas</h3>
<div class="paragraph">
<p>When a database client queries a database, it uses the database&#8217;s current schema. As database schemas often change, the Debezium <strong>MySQL connector</strong> knows how the schema appeared for each <code>INSERT</code>, <code>UPDATE</code>, and <code>DELETE</code> operation.</p>
</div>
<div class="paragraph">
<p>MySQL includes both <em>row-level changes</em> and <em>DDL statements</em> in its binlog which the connector reads to parse and update the in-memory representation of each table&#8217;s schema. This is used to understand the table structure at the time of each operation, which produces accurate change events.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The connector records all DDL statements along with their position in the binlog in a separate database history so that when the connector restarts (<em>after a possible crash or graceful shutdown</em>), it continues reading the binlog from that specific point in time.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
See <a href="#the-mysql-connector-and-kafka-topics_cdc">The MySQL connector and Kafka topics</a> for more on topic naming conventions.
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>If you do not use the <em>database history topic</em> described here, check out the <a href="#how-the-mysql-connector-handles-schema-change-topics_cdc">schema change topics</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="how-the-mysql-connector-performs-database-snapshots_cdc">How the MySQL connector performs database snapshots</h3>
<div class="paragraph">
<p>When your Debezium MySQL connector is first started, it performs an initial <em>consistent snapshot</em> of your database. The following flow describes how this snapshot is completed.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This is the default snapshot mode which is set as <code>inital</code> in the <code>snapshot.mode</code> property. For other snapshots modes, please check out the <a href="#mysql-connector-configuration-properties_cdc">MySQL connector configuration properties</a>.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">The connector&#8230;&#8203;</dt>
</dl>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 90%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Step</th>
<th class="tableblock halign-left valign-top">Action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>19</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Grabs a <strong>global read lock</strong> that blocks <em>writes</em> by other database clients.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The snapshot itself does not prevent other clients from applying DDL which might interfere with the connector&#8217;s attempt to read the binlog position and table schemas. The global read lock is kept while teh binlog position is read before released in a later step.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>20</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Starts a transaction with <a href="https://dev.mysql.com/doc/refman/5.6/en/innodb-consistent-read.html">repeatable read semantics</a> to ensure that all subsequent reads within the transaction are done against the <em>consistent snapshot</em>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>21</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Reads the current binlog position.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>22</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Reads the schema of the databases and tables allowed by the connector&#8217;s configuration.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>23</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Releases the <strong>global read lock</strong>. This now allows other database clients to write to the database.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>24</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Writes the DDL changes to the schema change topic, including all necessary <code>DROP&#8230;&#8203;</code> and <code>CREATE&#8230;&#8203;</code> DDL statements.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This happens if applicable.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>25</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Scans the database tables and generates <code>CREATE</code> events on the relevant table-specific Kakfa topics for each row.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>26</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Commits the transaction.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>27</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Records the completed snapshot in the connector offsets.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_what_happens_if_the_connector_fails_3">What happens if the connector fails?</h4>
<div class="paragraph">
<p>If the connector fails, stops, or is rebalanced while making the <em>initial snapshot</em>, the connector creates a new snapshot once restarted. Once that <em>intial snapshot</em> is completed, the Debezium MySQL connector restarts from the same position in the binlog so it does not miss any updates.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If the connector stops for long enough, MySQL could purge old binlog files and the connector&#8217;s position would be lost. If the position is lost, the connecotr reverts to the <em>initial snapshot</em> for its starting position. For more tips on troubleshooting the Debezium MySQL connector, see <a href="#troubleshoot-the-mysql-connector">Troubleshooting the MySQL connector</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_what_if_global_read_locks_are_not_allowed_3">What if Global Read Locks are not allowed?</h4>
<div class="paragraph">
<p>Some environments do not allow a <strong>global read lock</strong>. If the Debezium MySQL connector detects that global read locks are not permitted, the connector uses table-level locks instead and performs a snapshot with this method.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
The user must have <code>LOCK_TABLES</code> privileges.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">The connector&#8230;&#8203;</dt>
</dl>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 90%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Step</th>
<th class="tableblock halign-left valign-top">Action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>19</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Starts a transaction with <a href="https://dev.mysql.com/doc/refman/5.6/en/innodb-consistent-read.html">repeatable read semantics</a> to ensure that all subsequent reads within the transaction are done against the <em>consistent snapshot</em>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>20</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reads and filters the names of the databases and tables.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>21</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Reads the current binlog position.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>22</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Reads the schema of the databases and tables allowed by the connector&#8217;s configuration.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>23</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Writes the DDL changes to the schema change topic, including all necessary <code>DROP&#8230;&#8203;</code> and <code>CREATE&#8230;&#8203;</code> DDL statements.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This happens if applicable.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>24</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Scans the database tables and generates <code>CREATE</code> events on the relevant table-specific Kakfa topics for each row.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>25</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Commits the transaction.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>26</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Releases the table-level locks.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>27</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Records the completed snapshot in the connector offsets.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p> <br></p>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="#troubleshoot-the-mysql-connector">Troubleshooting the MySQL connector</a></p>
</li>
<li>
<p><a href="#mysql-connector-configuration-properties_cdc">MySQL configuration properties</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="how-the-mysql-connector-handles-schema-change-topics_cdc">How the MySQL connector handles schema change topics</h3>
<div class="paragraph">
<p>You can configure the  Debezium <strong>MySQL connector</strong> to produce schema change events that include all DDL statements applied to databases in the MySQL server. The connector writes all of these events to a Kakfa topic named <code>&lt;serverName&gt;</code> where <code>serverName</code> is the name of the connector as specified in the <code>database.server.name</code> configuration property.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
If you choose to use <em>schema change events</em>, use the schema change topic and <strong>do not</strong> consume the database history topic.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Make sure that the <code>num.partitions</code> configuration for Kakfa is set to <code>1</code> to ensure schema changes are kept in the correct order.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_schema_change_topic_structure_3">Schema change topic structure</h4>
<div class="paragraph">
<p>Each message that is written to the schema change topic contains a message key which includes the name of the connected database used when applying DDL statements:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "schema": {
    "type": "struct",
    "name": "io.Debezium.connector.mysql.SchemaChangeKey",
    "optional": false,
    "fields": [
      {
        "field": "databaseName",
        "type": "string",
        "optional": false
      }
    ]
  },
  "payload": {
    "databaseName": "inventory"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The schema change event message value contains a structure that includes the DDL statements, the database to which the statements were applied, and the position in the binlog where the statements appeared:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "schema": {
    "type": "struct",
    "name": "io.Debezium.connector.mysql.SchemaChangeValue",
    "optional": false,
    "fields": [
      {
        "field": "databaseName",
        "type": "string",
        "optional": false
      },
      {
        "field": "ddl",
        "type": "string",
        "optional": false
      },
      {
        "field": "source",
        "type": "struct",
        "name": "io.Debezium.connector.mysql.Source",
        "optional": false,
        "fields": [
          {
            "type": "string",
            "optional": true,
            "field": "version"
          },
          {
            "type": "string",
            "optional": false,
            "field": "name"
          },
          {
            "type": "int64",
            "optional": false,
            "field": "server_id"
          },
          {
            "type": "int64",
            "optional": false,
            "field": "ts_sec"
          },
          {
            "type": "string",
            "optional": true,
            "field": "gtid"
          },
          {
            "type": "string",
            "optional": false,
            "field": "file"
          },
          {
            "type": "int64",
            "optional": false,
            "field": "pos"
          },
          {
            "type": "int32",
            "optional": false,
            "field": "row"
          },
          {
            "type": "boolean",
            "optional": true,
            "default": false,
            "field": "snapshot"
          },
          {
            "type": "int64",
            "optional": true,
            "field": "thread"
          },
          {
            "type": "string",
            "optional": true,
            "field": "db"
          },
          {
            "type": "string",
            "optional": true,
            "field": "table"
          },
          {
            "type": "string",
            "optional": true,
            "field": "query"
          }
        ]
      }
    ]
  },
  "payload": {
    "databaseName": "inventory",
    "ddl": "CREATE TABLE products ( id INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY, name VARCHAR(255) NOT NULL, description VARCHAR(512), weight FLOAT ); ALTER TABLE products AUTO_INCREMENT = 101;",
    "source" : {
      "version": "0.10.0.Beta4",
      "name": "mysql-server-1",
      "server_id": 0,
      "ts_sec": 0,
      "gtid": null,
      "file": "mysql-bin.000003",
      "pos": 154,
      "row": 0,
      "snapshot": true,
      "thread": null,
      "db": null,
      "table": null,
      "query": null
    }
  }
}</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_important_tips_regarding_schema_change_topics_3">Important tips regarding schema change topics</h5>
<div class="paragraph">
<p>The <code>ddl</code> field may contain multiple DDL statements. Every statement applies to the database in the <code>databaseName</code> field and appears in the same order as they were applied in the database. The <code>source</code> field is structured exactly as a standard data change event written to table-specific topics. This field is useful to correlate events on different topic.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">....
    "payload": {
        "databaseName": "inventory",
        "ddl": "CREATE TABLE products ( id INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY,...
        "source" : {
            ....
        }
    }
....</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">What if a client submits DDL statements to <em>multiple databases</em>?</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>If MySQL applies them atomically, the connector takes the DDL statements in order, groups them by database, and creates a schema change event for each group.</p>
</li>
<li>
<p>If MySQL applies them individually, the connector creates a separate schema change event for each statement.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>If you do not use the <em>schema change topics</em> detailed here, check out the <a href="#how-the-mysql-connector-uses-database-schemas_cdc">database history topic</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Unresolved directive in ../assemblies/cdc-mysql-connector/as_troubleshoot-the-mysql-connector.adoc - include::../../modules/cdc-mysql-connector/c_understanding-mysql-connector-events.adoc[leveloffset=+1]</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="how-the-mysql-connector-maps-data-types_cdc">How the MySQL connector maps data types</h3>
<div class="paragraph">
<p>A short introductory paragraph is required for the concept module.
It will provide an overview of the module.</p>
</div>
<div class="paragraph">
<p>The contents of a concept module give the user descriptions and explanations needed to understand and use a product.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Look at nouns and noun phrases in related procedure modules and assemblies to find the concepts to explain to users.</p>
</li>
<li>
<p>Explain only things that are visible to users. Even if a concept is interesting, it probably does not require explanation if it is not visible to users.</p>
</li>
<li>
<p>Do not include any instructions to perform an action, such as executing a command. Action items belong in procedure modules.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>A bulleted list of links to other material closely related to the contents of the concept module.</p>
</li>
<li>
<p>For more details on writing concept modules, see the <a href="https://github.com/redhat-documentation/modular-docs#modular-documentation-reference-guide">Modular Documentation Reference Guide</a>.</p>
</li>
<li>
<p>Use a consistent system for file names, IDs, and titles. For tips, see <em>Anchor Names and File Names</em> in <a href="https://github.com/redhat-documentation/modular-docs#modular-documentation-reference-guide">Modular Documentation Reference Guide</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="the-mysql-connector-and-kafka-topics_cdc">The MySQL connector and Kakfa topics</h3>
<div class="paragraph">
<p>The Debezium MySQL connector writes events for all <code>INSERT</code>, <code>UPDATE</code>, and <code>DELETE</code> operations from a single table to a single Kakfa topic. The Kakfa topic naming convention is as follows:</p>
</div>
<div class="listingblock">
<div class="title">format</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">serverName.databaseName.tableName</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 3. example</div>
<div class="content">
<div class="paragraph">
<p>Let us say that <code>fulfillment</code> is the server name and <code>inventory</code> is the database which contains <strong>three</strong> tables of <code>orders</code>, <code>customers</code>, and <code>products</code>. The Debezium MySQL connector produces events on three Kakfa topics, one for each table in the database:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">fulfillment.inventory.orders

fulfillment.inventory.customers

fulfillment.inventory.products</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2019-10-31 11:16:18 UTC
</div>
</div>
</body>
</html>